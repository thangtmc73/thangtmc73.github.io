<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Javascript Hoisting - thangtmc73</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Bài viết này bàn về Hoisting trong Javascript"><meta property="og:image" content><meta property="og:title" content="Javascript Hoisting"><meta property="og:description" content="Bài viết này bàn về Hoisting trong Javascript"><meta property="og:type" content="article"><meta property="og:url" content="https://thangtmc73.github.io/posts/2021-11-26-javascript-hoisting/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-11-26T22:47:31+07:00"><meta property="article:modified_time" content="2021-11-26T22:47:31+07:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Javascript Hoisting"><meta name=twitter:description content="Bài viết này bàn về Hoisting trong Javascript"><link href=https://thangtmc73.github.io/css/fonts.039ed78ea7627114c5d582dcc9952b2fc686362e866bbb4878c2235526ef1a03.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://thangtmc73.github.io/css/main.727b9d3ce28f3ded1c1b8bc79d5ae70a84bb5f1da8245ecef0137ddf3a0b582b.css><link rel=stylesheet type=text/css href=https://thangtmc73.github.io/css/dark.854b5d55a965fff7bbe61d58f1b825b9920ef964b40dda764a30a95d5095ae87.css media="(prefers-color-scheme: dark)"></head><body><div class=content><header><div class=main><a id=blog-title href=https://thangtmc73.github.io/>thangtmc73</a></div><nav><a href=/>Home</a>
<a href=/posts>Posts</a></nav></header><main><article><div class=title><h1 class=title>Javascript Hoisting</h1><div class=meta>Posted on Nov 26, 2021</div></div><section class=body><h1 id=khái-niệm>Khái niệm</h1><p>Hoisting trong Javascript là một hành vi của Javascript engine, nó sẽ đem phần khai báo (declaration) của một biến (variable), một hàm (function) hoặc một lớp (class) lên trên đầu scope của chúng trước khi thực thi code. Nói cách khác, bạn có thể thực thi một logic truy cập một biến, một hàm hoặc một lớp trước khi khai báo nó, Javascript engine sẽ hiểu ngầm đem phần khai báo đó lên trên trước khi thực thi đoạn logic của bạn.</p><h1 id=function-hoisting>Function Hoisting</h1><p>Ví dụ:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>hello(<span style=color:#b44>&#34;world&#34;</span>); <span style=color:#080;font-style:italic>// print &#34;Hello world&#34;
</span><span style=color:#080;font-style:italic></span>
<span style=color:#a2f;font-weight:700>function</span> hello(name) {
  console.log(<span style=color:#b44>&#34;Hello &#34;</span> <span style=color:#666>+</span> name);
}
</code></pre></td></tr></table></div></div><p>Như bạn có thể thấy, hàm <code>hello</code> được gọi ra trước khi nó được khai báo ngay sau đó. Đây là kiểu hoisting ít phức tạp và dễ hiểu nhất.</p><p>Trong trường hợp bạn không khai báo hàm <code>hello</code> mà chỉ gọi nó, một <code>ReferenceError</code> sẽ được đưa ra:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>hello(<span style=color:#b44>&#34;world&#34;</span>); <span style=color:#080;font-style:italic>// ReferenceError: &#39;hello&#39; is not defined
</span></code></pre></td></tr></table></div></div><h1 id=variable-hoisting>Variable Hoisting</h1><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>console.log(name); <span style=color:#080;font-style:italic>// print undefined
</span><span style=color:#080;font-style:italic></span>name <span style=color:#666>=</span> <span style=color:#b44>&#34;Thang&#34;</span>; <span style=color:#080;font-style:italic>// Initialization
</span><span style=color:#080;font-style:italic></span>console.log(name); <span style=color:#080;font-style:italic>// print &#34;Thang&#34;
</span><span style=color:#080;font-style:italic></span><span style=color:#a2f;font-weight:700>var</span> name; <span style=color:#080;font-style:italic>// Declaration
</span></code></pre></td></tr></table></div></div><p>Theo như đoạn code ở trên, biến <code>name</code> được truy cập, gán giá trị trước khi được khai báo ở dòng 5. Câu hỏi được đặt ra, tại sao ở dòng 1 khi in <code>name</code> lại nhận được kết quả <code>undefined</code>?</p><p>Trong thực tế, việc hoisting chỉ đem phần khai báo của biến <code>name</code> lên trên đầu của scope. Nó không đem phần khởi tạo (initialization) lên trên cùng theo. Vậy nên Javascript engine sẽ hiểu như sau:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a2f;font-weight:700>var</span> name; <span style=color:#080;font-style:italic>// Declaration
</span><span style=color:#080;font-style:italic></span>console.log(name); <span style=color:#080;font-style:italic>// print undefined
</span><span style=color:#080;font-style:italic></span>name <span style=color:#666>=</span> <span style=color:#b44>&#34;Thang&#34;</span>; <span style=color:#080;font-style:italic>// Initialization
</span><span style=color:#080;font-style:italic></span>console.log(name); <span style=color:#080;font-style:italic>// print &#34;Thang&#34;
</span></code></pre></td></tr></table></div></div><p>Giá trị mặc định của một biến khai báo với keyword <code>var</code> là <code>undefined</code>. Vậy nên dòng 2, giá trị của <code>name</code> là <code>undefined</code>. Ở dòng 3 tôi gán <code>name</code> là <code>"Thang"</code>, biến <code>name</code> đã được định nghĩa một giá trị cụ thể và được in ra ở dòng 5.</p><p>Trong trường hợp bạn không khai báo biến <code>name</code> mà chỉ đơn thuần truy cập, cập nhật giá trị, một <code>ReferenceError</code> sẽ được đưa ra:</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>console.log(name); <span style=color:#080;font-style:italic>// ReferenceError: &#39;name&#39; is not defined
</span></code></pre></td></tr></table></div></div><p>Ngoài ra, trong Javascript, chúng ta không chỉ dùng keyword <code>var</code> để khai báo (hoặc kết hợp cả định nghĩa) một biến, Javascript ES6 hỗ trợ thêm các keyword <code>const</code> và <code>let</code>. Tương tự như <code>var</code>, các biến khai báo bằng <code>const</code> và <code>let</code> cũng có thể hoisting. Tuy nhiên có một chút khác biệt ở phần khởi tạo (initialization).</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>console.log(constant); <span style=color:#080;font-style:italic>// ReferenceError: Cannot access &#39;constant&#39; before initialization
</span><span style=color:#080;font-style:italic></span><span style=color:#a2f;font-weight:700>const</span> constant <span style=color:#666>=</span> <span style=color:#666>5</span>;
</code></pre></td></tr></table></div></div><p>Keyword <code>const</code> và <code>var</code> không có một giá trị mặc định cụ thể khi khai báo các biến. Các biến này sẽ throw ra một <code>ReferenceError</code> ngăn không cho bạn truy cập vào chúng trước khi chúng được khởi tạo. Chúng vẫn <code>hoisting</code> được, chỉ là không thể truy cập được chúng trước khi khởi tạo chúng.</p><h1 id=class-hoisting>Class Hoisting</h1><p>Sau khi xem qua về <code>Function Hoisting</code> và <code>Variable Hoisting</code>, nhắc đến <code>Class Hoisting</code>, ta sẽ nghĩ ngay đến việc có thể khởi tạo một đối tượng với một lớp cụ thể trước khi định nghĩa lớp đó. Trên thực tế điều đó không xảy ra.</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a2f;font-weight:700>const</span> tiger <span style=color:#666>=</span> <span style=color:#a2f;font-weight:700>new</span> Animal(); <span style=color:#080;font-style:italic>// ReferenceError: Cannot access &#39;Animal&#39; before initialization
</span><span style=color:#080;font-style:italic></span><span style=color:#a2f;font-weight:700>class</span> Animal {
  run() {}
}
</code></pre></td></tr></table></div></div><p>Phần khai báo của lớp <code>Animal</code> cũng được hoisting. Tuy nhiên, lớp này vẫn chưa trải qua bước khởi tạo, vậy nên chúng cũng throw một <code>ReferenceError</code>. Trong trường hợp này, chúng ta bắt buộc phải khai báo và định nghĩa lớp trước khi truy cập vào chúng.</p><div class=highlight><div style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a2f;font-weight:700>class</span> Animal {
  run() {}
}
<span style=color:#a2f;font-weight:700>const</span> tiger <span style=color:#666>=</span> <span style=color:#a2f;font-weight:700>new</span> Animal();
</code></pre></td></tr></table></div></div><h1 id=tham-khảo>Tham khảo</h1><p><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter>Hoisting - MDN Web Docs</a></p><p><a href=https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Classes>Classes - MDN Web Docs</a></p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/javascript>javascript</a></li><li><a href=/tags/fundemental>fundemental</a></li></ul></nav></div></article></main><footer><hr>⚡️
2021 <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></footer></div></body></html>